{% extends "base.html" %}

{% block title %}Записи{% endblock %}

{% block content %}
    <h1>Записи</h1>
    {% if error %}
        <div class="error-message">
            <p>{{ error }}</p>
        </div>
    {% endif %}
    {% if username %}
        <a href="/create_post">Создать новый пост</a>
    {% endif %}
    <div>
        {% for post in posts %}
        <div class="post">
            <h2>{{ post.title[:150] }}</h2>
            <p>{{ post.content[:200] }}...</p>
            <a href="/post/{{ post.id }}">Читать далее</a>
            {% if username %}
                <a href="/edit_post/{{ post.id }}">Редактировать</a>
                <form method="post" action="/delete_post/{{ post.id }}"  style="display: inline;">
                    <button type="submit">Удалить</button>
                </form>
            {% endif %}
            <div class="post-author">
                Автор: {{ post.username }}
            </div>
        </div>
        {% endfor %}
    </div>
{% endblock %}
